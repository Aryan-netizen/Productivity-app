<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Decision-Light Daily System</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Inter", sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      background-attachment: fixed;
      min-height: 100vh;
      padding: 16px;
      line-height: 1.6;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 380px 1fr;
      gap: 10px;
      min-height: calc(100vh - 32px);
      align-items: start;
    }

    .welcome-banner {
      grid-column: 1 / -1;
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      color: white;
      padding: 24px 32px;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      margin-bottom: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .welcome-banner h2 {
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 12px;
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -0.5px;
    }

    .today-tasks {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .today-tasks h3 {
      font-size: 16px;
      color: #e2e8f0;
      margin-bottom: 12px;
      font-weight: 600;
    }

    .task-preview {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      padding: 12px 16px;
      border-radius: 12px;
      margin-bottom: 8px;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }



    .task-preview::before {
      content: 'üìå';
      font-size: 16px;
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
    }

    .no-tasks {
      color: #cbd5e0;
      font-style: italic;
      font-size: 14px;
      text-align: center;
      padding: 12px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      border: 1px dashed rgba(255, 255, 255, 0.2);
    }

    .calendar-section {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      padding: 28px;

      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    
      max-height: calc(100vh - 160px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 2px solid #f1f5f9;
    }

    .calendar-header h2 {
      font-size: 22px;
      font-weight: 800;
      color: #1e293b;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .month-nav {
      display: flex;
      gap: 8px;
    }

    .month-nav button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 18px;
      font-weight: 700;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
    }

    .month-nav button:hover {
      background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .month-nav button:active {
      transform: translateY(0);
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
    }

    .weekdays {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
      margin-bottom: 12px;
    }

    .weekday {
      text-align: center;
      font-size: 13px;
      font-weight: 700;
      color: #4a5568;
      padding: 10px 0;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .days-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
    }

    .day {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      position: relative;
      transition: all 0.3s ease;
      background: #ffffff;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      border: 2px solid transparent;
      min-height: 40px;
      overflow: visible;
    }

    .day:not(.empty):hover {
      background: #e6f3ff;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.2);
      border-color: #667eea;
    }

    .day.empty {
      cursor: default;
      background: transparent;
      box-shadow: none;
    }

    .day.today {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border: 2px solid #f59e0b;
      box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
      font-weight: 700;
      color: #92400e;
    }

    .day.selected {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-weight: 700;
      box-shadow: 0 6px 24px rgba(119, 133, 200, 0.4);
      border-color: #5a67d8;
    }

    .day.has-data::after {
      content: '';
      position: absolute;
      bottom: 4px;
      left: 50%;
      transform: translateX(-50%);
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #10b981;
      box-shadow: 0 0 6px rgba(16, 185, 129, 0.5);
      z-index: 1;
    }

    .day.has-reminder::before {
      content: 'üìå';
      position: absolute;
      top: -4px;
      left: -4px;
      font-size: 12px;
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
      z-index: 2;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .day.selected.has-data::after {
      background: #fbbf24;
      box-shadow: 0 0 6px rgba(251, 191, 36, 0.7);
    }

    .day.all-tasks-done {
      background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
      border: 2px solid #10b981;
      color: #065f46;
      font-weight: 700;
      position: relative;
    }

    .day.all-tasks-done::after {
      content: 'üî•';
      position: absolute;
      top: -4px;
      right: -4px;
      font-size: 14px;
      animation: fire-glow 2s ease-in-out infinite;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      z-index: 2;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .day.tasks-incomplete {
      background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
      border: 2px solid #f87171;
      color: #991b1b;
      font-weight: 700;
      position: relative;
    }

    .day.tasks-incomplete::after {
      content: 'üò¢';
      position: absolute;
      top: -4px;
      right: -4px;
      font-size: 14px;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      z-index: 2;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @keyframes fire-glow {
      0%, 100% {
        transform: scale(1) rotate(0deg);
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2)) hue-rotate(0deg);
      }
      25% {
        transform: scale(1.1) rotate(-5deg);
        filter: drop-shadow(0 4px 8px rgba(255, 107, 0, 0.4)) hue-rotate(10deg);
      }
      50% {
        transform: scale(1.15) rotate(0deg);
        filter: drop-shadow(0 6px 12px rgba(255, 107, 0, 0.6)) hue-rotate(20deg);
      }
      75% {
        transform: scale(1.1) rotate(5deg);
        filter: drop-shadow(0 4px 8px rgba(255, 107, 0, 0.4)) hue-rotate(10deg);
      }
    }

    .year-selector {
      margin-top: 24px;
      padding-top: 24px;
      border-top: 2px solid #f1f5f9;
    }

    .year-selector label {
      display: block;
      font-size: 13px;
      font-weight: 700;
      color: #64748b;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .year-selector select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 600;
      background: white;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .year-selector select:hover {
      border-color: #667eea;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
    }

    .year-selector select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .main-content {
      background: rgb(28 26 26 / 95%);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      padding: 32px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      overflow-y: auto;
      max-height: fit-content;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .header {
      margin-bottom: 32px;
      padding-bottom: 24px;
      border-bottom: 3px solid #f1f5f9;
      text-align: center;
    }

    .header h1 {
      font-size: 32px;
      font-weight: 800;
      color: #1e293b;
      margin-bottom: 8px;
      letter-spacing: -0.5px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .header .subtitle {
      font-size: 16px;
      color: #64748b;
      font-style: italic;
      font-weight: 500;
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.5;
    }

    .section {
      background: white;
      border: 2px solid #f1f5f9;
      border-radius: 16px;
      padding: 28px;
      margin-bottom: 24px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
    }


    .section h3 {
      font-size: 18px;
      color: #1e293b;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
    }

    .section-number {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .reminder-input-group {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 16px;
      margin-bottom: 20px;
    }

    .reminder-input-group input {
      padding: 14px 18px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 15px;
      transition: all 0.3s ease;
      background: #fafbfc;
    }

    .reminder-input-group input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      background: white;
    }

    .add-reminder-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 14px 28px;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
      box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
    }

    .add-reminder-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 24px rgba(102, 126, 234, 0.4);
    }

    .add-reminder-btn:active {
      transform: translateY(0);
    }

    .reminders-list {
      display: grid;
      gap: 12px;
    }

    .reminder-item {
      background: #f8fafc;
      padding: 16px 20px;
      border-radius: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-left: 4px solid #667eea;
      transition: all 0.3s ease;
      border: 1px solid #e2e8f0;
    }



    .reminder-item.completed {
      opacity: 0.7;
      border-left-color: #10b981;
      background: #f0fdf4;
    }

    .reminder-item.rolled-over {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border-left-color: #f59e0b;
      border: 1px solid #f3d078;
    }

    .reminder-item.rolled-over .reminder-text {
      color: #92400e;
      font-weight: 600;
    }

    .reminder-item.rolled-over::before {
      content: '‚Üª';
      position: absolute;
      left: 8px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 16px;
      color: #f59e0b;
      font-weight: bold;
    }

    .reminder-item.rolled-over .reminder-text {
      margin-left: 24px;
    }

    .reminder-text {
      flex: 1;
      font-size: 15px;
      color: #374151;
      font-weight: 500;
    }

    .reminder-actions {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .reminder-checkbox {
      width: 22px;
      height: 22px;
      cursor: pointer;
      accent-color: #667eea;
    }

    .delete-reminder-btn {
      background: #ef4444;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .delete-reminder-btn:hover {
      background: #dc2626;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
    }

    .no-reminders {
      text-align: center;
      color: #9ca3af;
      font-style: italic;
      padding: 24px;
      font-size: 15px;
      background: #f9fafb;
      border-radius: 12px;
      border: 2px dashed #e5e7eb;
    }

    .mode-options {
      display: grid;
      gap: 16px;
    }

    .mode-option {
      position: relative;
    }

    .mode-option input[type="radio"] {
      position: absolute;
      opacity: 0;
    }

    .mode-option label {
      display: block;
      padding: 20px 24px;
      border: 2px solid #e2e8f0;
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: #fafbfc;
    }

    .mode-option input[type="radio"]:checked + label {
      border-color: #667eea;
      background: linear-gradient(135deg, #eef2ff 0%, #e0e7ff 100%);
      font-weight: 600;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
    }



    .mode-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 6px;
      color: #1e293b;
    }

    .mode-desc {
      font-size: 14px;
      color: #64748b;
      line-height: 1.5;
    }

    .checklist {
      display: grid;
      gap: 14px;
    }

    .checklist-item {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 16px 20px;
      border-radius: 12px;
      background: #f8fafc;
      transition: all 0.3s ease;
      border: 1px solid #e2e8f0;
    }

    .checklist-item:hover {
      background: #f1f5f9;
      transform: translateX(4px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .checklist-item input[type="checkbox"] {
      margin-top: 3px;
      width: 22px;
      height: 22px;
      cursor: pointer;
      accent-color: #667eea;
    }

    .checklist-item label {
      flex: 1;
      cursor: pointer;
      font-size: 16px;
      line-height: 1.6;
      color: #374151;
      font-weight: 500;
    }

    .checklist-item input[type="checkbox"]:checked + label {
      text-decoration: line-through;
      color: #9ca3af;
      opacity: 0.7;
    }

    input[type="text"], textarea {
      width: 100%;
      padding: 14px 18px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 16px;
      font-family: inherit;
      transition: all 0.3s ease;
      background: #fafbfc;
    }

    input[type="text"]:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      background: white;
    }

    textarea {
      resize: vertical;
      min-height: 120px;
      line-height: 1.6;
    }

    .input-group {
      margin-top: 16px;
    }

    .input-label {
      display: block;
      font-size: 14px;
      font-weight: 700;
      color: #374151;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .ai-prompts {
      display: grid;
      gap: 16px;
    }

    .prompt-card {
      background: #f8fafc;
      padding: 20px;
      border-radius: 16px;
      border-left: 4px solid #667eea;
      border: 1px solid #e2e8f0;
      transition: all 0.3s ease;
    }



    .prompt-title {
      font-weight: 700;
      font-size: 16px;
      margin-bottom: 12px;
      color: #1e293b;
    }

    .prompt-text {
      font-size: 14px;
      color: #4b5563;
      font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
      background: white;
      padding: 16px;
      border-radius: 10px;
      margin-top: 12px;
      line-height: 1.7;
      border: 1px solid #e5e7eb;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.02);
    }

    .identity {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 32px;
      border-radius: 20px;
      text-align: center;
      font-size: 20px;
      font-weight: 700;
      margin-top: 32px;
      box-shadow: 0 12px 40px rgba(102, 126, 234, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      line-height: 1.6;
      letter-spacing: -0.3px;
    }

    .footer {
      margin-top: 40px;
      padding-top: 24px;
      border-top: 2px solid #f1f5f9;
      text-align: center;
      font-size: 14px;
      color: #64748b;
      font-weight: 500;
    }

    @media (max-width: 1024px) {
      .container {
        grid-template-columns: 1fr;
        gap: 16px;
      }
      
      .calendar-section, .main-content {
        max-height: none;
      }

      .calendar-section {
        padding: 24px;
      }

      .main-content {
        padding: 28px;
      }
    }

    @media (max-width: 768px) {
      body {
        padding: 12px;
      }

      .container {
        gap: 12px;
        min-height: calc(100vh - 24px);
      }

      .welcome-banner {
        padding: 20px 24px;
        margin-bottom: 16px;
      }

      .welcome-banner h2 {
        font-size: 24px;
      }

      .calendar-section {
        padding: 20px;
      }

      .calendar-header h2 {
        font-size: 20px;
      }

      .month-nav button {
        width: 32px;
        height: 32px;
        font-size: 16px;
      }

      .day {
        min-height: 36px;
        font-size: 13px;
      }

      .weekday {
        font-size: 11px;
        padding: 8px 0;
      }

      .main-content {
        padding: 24px;
      }

      .header h1 {
        font-size: 28px;
      }

      .header .subtitle {
        font-size: 15px;
      }

      .section {
        padding: 24px;
        margin-bottom: 20px;
      }

      .section h3 {
        font-size: 17px;
      }

      .mode-title {
        font-size: 17px;
      }

      .checklist-item label {
        font-size: 15px;
      }

      input[type="text"], textarea {
        font-size: 16px; /* Prevents zoom on iOS */
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 8px;
      }

      .welcome-banner {
        padding: 16px 20px;
      }

      .welcome-banner h2 {
        font-size: 22px;
      }

      .calendar-section {
        padding: 16px;
      }

      .main-content {
        padding: 20px;
      }

      .header h1 {
        font-size: 24px;
      }

      .section {
        padding: 20px;
        margin-bottom: 16px;
      }

      .days-grid {
        gap: 3px;
      }

      .weekdays {
        gap: 3px;
      }

      .day {
        min-height: 32px;
        font-size: 12px;
      }

      .weekday {
        font-size: 10px;
        padding: 6px 0;
      }

      .reminder-input-group {
        grid-template-columns: 1fr;
        gap: 12px;
      }

      .add-reminder-btn {
        width: 100%;
      }

      .mode-option label {
        padding: 16px 20px;
      }

      .checklist-item {
        padding: 14px 16px;
      }

      .section h3 {
        font-size: 16px;
      }

      .mode-title {
        font-size: 16px;
      }

      .identity {
        padding: 24px;
        font-size: 18px;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="welcome-banner">
      <h2 id="welcomeMessage">Rise and Shine, Mr. Aryan! ‚òÄÔ∏è</h2>
      <div class="today-tasks" id="todayTasksPreview">
        <h3>Today's Reminders:</h3>
        <div id="taskPreviewList"></div>
      </div>
    </div>

    <div class="calendar-section">
      <div class="calendar-header">
        <h2 id="monthYear"></h2>
        <div class="month-nav">
          <button id="prevMonth">‚Äπ</button>
          <button id="nextMonth">‚Ä∫</button>
        </div>
      </div>

      <div class="weekdays">
        <div class="weekday">Su</div>
        <div class="weekday">Mo</div>
        <div class="weekday">Tu</div>
        <div class="weekday">We</div>
        <div class="weekday">Th</div>
        <div class="weekday">Fr</div>
        <div class="weekday">Sa</div>
      </div>

      <div class="days-grid" id="daysGrid"></div>

      <div class="year-selector">
        <label>Jump to Year</label>
        <select id="yearSelect"></select>
      </div>
    </div>

    <div class="main-content">
      <div class="header">
        <h1 id="selectedDate">Select a date to begin</h1>
        <p class="subtitle">Rule: You do not decide what to do during the day. You only decide when to start.</p>
      </div>

      <div class="section">
        <h3><span class="section-number">üìå</span> Reminders & Tasks for This Day</h3>
        <div id="rolloverNotification" style="display: none; margin-bottom: 16px; padding: 12px 16px; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-radius: 12px; border-left: 4px solid #f59e0b; border: 1px solid #f3d078;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <p style="color: #92400e; font-size: 14px; font-weight: 600; margin: 0;">
              ‚Üª <span id="rolloverCount">0</span> incomplete task(s) automatically carried over from previous days
            </p>
            <button onclick="rolloverIncompleteReminders(); renderReminders(); updateWelcomeBanner();" 
                    style="background: #f59e0b; color: white; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; cursor: pointer;">
              Refresh Rollover
            </button>
          </div>
        </div>
        <div class="reminder-input-group">
          <input type="text" id="reminderInput" placeholder="Add a reminder or task for this day...">
          <button class="add-reminder-btn" id="addReminderBtn">Add</button>
        </div>
        <div class="reminders-list" id="remindersList">
          <div class="no-reminders">No reminders for this day yet</div>
        </div>
      </div>

      <div class="section">
        <h3><span class="section-number">1</span> Morning (2 minutes)</h3>
        <p style="margin-bottom: 16px; color: #64748b; font-size: 15px; font-weight: 500;">Today's Mode (select ONE - no switching unless physically necessary):</p>
        
        <div class="mode-options">
          <div class="mode-option">
            <input type="radio" name="mode" value="build" id="modeBuild">
            <label for="modeBuild">
              <div class="mode-title">üî• Build Mode</div>
              <div class="mode-desc">High energy - Deep work, communication, movement</div>
            </label>
          </div>

          <div class="mode-option">
            <input type="radio" name="mode" value="minimum" id="modeMinimum">
            <label for="modeMinimum">
              <div class="mode-title">‚öôÔ∏è Minimum Mode</div>
              <div class="mode-desc">Low energy - Core work only, 20 min max</div>
            </label>
          </div>

          <div class="mode-option">
            <input type="radio" name="mode" value="recovery" id="modeRecovery">
            <label for="modeRecovery">
              <div class="mode-title">üåø Recovery Mode</div>
              <div class="mode-desc">Burnout/sick - Rest is progress, no guilt</div>
            </label>
          </div>
        </div>
      </div>

      <div class="section" id="buildActions" style="display:none;">
        <h3><span class="section-number">2</span> Build Mode Actions</h3>
        <div class="checklist">
          <div class="checklist-item">
            <input type="checkbox" id="build1">
            <label for="build1"><strong>Deep Work (60‚Äì90 min):</strong> Coding / core project</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="build2">
            <label for="build2"><strong>Communication Drill (10 min):</strong> Speak, record, or mirror</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="build3">
            <label for="build3"><strong>Body:</strong> Gym / walk / stretch</label>
          </div>
        </div>
        <div style="margin-top: 20px; padding: 16px; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 4px solid #f59e0b; border-radius: 12px; border: 1px solid #f3d078;">
          <p style="color: #92400e; font-size: 14px; font-weight: 700; margin: 0;">All three completed? <span id="buildTasksStatus">üò¢</span></p>
        </div>
        <p style="margin-top: 16px; color: #64748b; font-size: 14px; font-style: italic; font-weight: 500;">Stop after completion. Extra work is optional, never required.</p>
      </div>

      <div class="section" id="minimumActions" style="display:none;">
        <h3><span class="section-number">2</span> Minimum Mode Actions</h3>
        <div class="checklist">
          <div class="checklist-item">
            <input type="checkbox" id="min1">
            <label for="min1"><strong>Core Work (20 min):</strong> Coding or revision only</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="min2">
            <label for="min2"><strong>Communication (5 min):</strong> Speak one topic aloud</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="min3">
            <label for="min3"><strong>Movement:</strong> Short walk</label>
          </div>
        </div>
        <div style="margin-top: 20px; padding: 16px; background: linear-gradient(135d, #f0fdf4 0%, #dcfce7 100%); border-left: 4px solid #10b981; border-radius: 12px; border: 1px solid #86efac;">
          <p style="color: #065f46; font-size: 14px; font-weight: 700; margin: 0;">If all three are done ‚Üí Day is a WIN <span id="minTasksStatus">üò¢</span></p>
        </div>
      </div>

      <div class="section" id="recoveryActions" style="display:none;">
        <h3><span class="section-number">2</span> Recovery Mode Actions</h3>
        <div class="checklist">
          <div class="checklist-item">
            <input type="checkbox" id="rec1">
            <label for="rec1"><strong>Light review / organizing only</strong></label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="rec2">
            <label for="rec2"><strong>No self-improvement content</strong></label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="rec3">
            <label for="rec3"><strong>Sleep, food, hydration first</strong></label>
          </div>
        </div>
        <div style="margin-top: 20px; padding: 16px; background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border-left: 4px solid #10b981; border-radius: 12px; border: 1px solid #86efac;">
          <p style="color: #065f46; font-size: 14px; font-weight: 700; margin: 0;">All three completed? <span id="recTasksStatus">üò¢</span></p>
        </div>
        <p style="margin-top: 16px; color: #10b981; font-size: 14px; font-weight: 700;">Recovery is progress. No guilt allowed.</p>
      </div>

      <div class="section">
        <h3><span class="section-number">3</span> One Focus Rule</h3>
        <p style="margin-bottom: 16px; color: #64748b; font-size: 15px; font-weight: 500;">If distracted, ask: "What is the next physical action?"</p>
        <input type="text" id="nextAction" placeholder="Write the next physical action here...">
      </div>

      <div class="section">
        <h3><span class="section-number">4</span> End of Day (3 minutes) - Close the Loops</h3>
        
        <div class="input-group">
          <label class="input-label">One thing I completed:</label>
          <input type="text" id="completed" placeholder="What did you finish today?">
        </div>

        <div class="input-group">
          <label class="input-label">One thing I learned:</label>
          <input type="text" id="learned" placeholder="What new insight did you gain?">
        </div>

        <div class="input-group">
          <label class="input-label">One thing to ignore tomorrow:</label>
          <input type="text" id="ignore" placeholder="What can you let go of?">
        </div>
      </div>

      <div class="section">
        <h3><span class="section-number">5</span> AI Prompts (Copy‚ÄìPaste)</h3>
        <div class="ai-prompts">
          <div class="prompt-card">
            <div class="prompt-title">Executor Mode</div>
            <div class="prompt-text">Act as an executor, not a planner. Goal: ___ Time available: ___ minutes Output format: checklist Start immediately.</div>
          </div>

          <div class="prompt-card">
            <div class="prompt-title">Decision Freeze</div>
            <div class="prompt-text">I'm freezing between A and B. Choose for me based on long-term leverage. No explanation longer than 5 lines. Then give me the next physical action.</div>
          </div>
        </div>
      </div>

      <div class="identity">
        I build systems, not moods. Consistency beats intensity.<br>
        This page is enough. Do not add more.
      </div>

      <div class="footer">
        ‚úì Auto-saved ‚Ä¢ Data stored locally in your browser
      </div>
    </div>
  </div>

  <script>
    let currentYear = 2026;
    let currentMonth = 0;
    let selectedDateKey = null;

    const monthNames = ["January", "February", "March", "April", "May", "June",
      "July", "August", "September", "October", "November", "December"];

    // Check and rollover incomplete reminders from previous days
    function rolloverIncompleteReminders() {
      const today = new Date();
      const todayKey = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
      
      // Check if we already did rollover today
      const lastRolloverDate = localStorage.getItem('lastRolloverDate');
      if (lastRolloverDate === todayKey) {
        return; // Already processed today
      }
      
      let rolledOverAny = false;
      
      // Check the last 7 days for incomplete reminders
      for (let i = 1; i <= 7; i++) {
        const pastDate = new Date(today);
        pastDate.setDate(today.getDate() - i);
        const pastDateKey = `${pastDate.getFullYear()}-${String(pastDate.getMonth() + 1).padStart(2, '0')}-${String(pastDate.getDate()).padStart(2, '0')}`;
        
        const pastReminders = JSON.parse(localStorage.getItem(`reminders_${pastDateKey}`)) || [];
        const incompleteReminders = pastReminders.filter(r => !r.completed && !r.rolledOver);
        
        if (incompleteReminders.length > 0) {
          // Get today's reminders
          const todayReminders = JSON.parse(localStorage.getItem(`reminders_${todayKey}`)) || [];
          
          // Add incomplete reminders to today with a prefix
          incompleteReminders.forEach(reminder => {
            const dateStr = pastDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            const rolledOverReminder = {
              text: `[From ${dateStr}] ${reminder.text}`,
              completed: false,
              rolledOver: true,
              originalDate: pastDateKey,
              rolloverDate: todayKey
            };
            
            // Check if this reminder hasn't already been rolled over
            const alreadyExists = todayReminders.some(r => 
              r.rolledOver && r.originalDate === pastDateKey && r.text.includes(reminder.text)
            );
            
            if (!alreadyExists) {
              todayReminders.push(rolledOverReminder);
              rolledOverAny = true;
            }
          });
          
          // Save updated today's reminders
          if (todayReminders.length > 0) {
            localStorage.setItem(`reminders_${todayKey}`, JSON.stringify(todayReminders));
          }
          
          // Mark past reminders as processed
          pastReminders.forEach(reminder => {
            if (!reminder.completed && !reminder.rolledOver) {
              reminder.rolledOver = true;
              reminder.rolloverDate = todayKey;
            }
          });
          localStorage.setItem(`reminders_${pastDateKey}`, JSON.stringify(pastReminders));
        }
      }
      
      // Mark that we've done rollover for today
      if (rolledOverAny) {
        localStorage.setItem('lastRolloverDate', todayKey);
      }
    }

    // Get all reminders
    function getAllReminders() {
      const reminders = {};
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && key.startsWith('reminders_')) {
          try {
            const dateKey = key.replace('reminders_', '');
            reminders[dateKey] = JSON.parse(localStorage.getItem(key));
          } catch (e) {
            console.error('Error parsing reminders:', e);
          }
        }
      }
      return reminders;
    }

    // Check if all three tasks are completed for a mode
    function checkAllTasksCompleted(dateKey) {
      const data = JSON.parse(localStorage.getItem(dateKey)) || {};
      const mode = data.mode;
      
      if (!mode) return false;

      let task1, task2, task3;
      if (mode === 'build') {
        task1 = data.build1 || false;
        task2 = data.build2 || false;
        task3 = data.build3 || false;
      } else if (mode === 'minimum') {
        task1 = data.min1 || false;
        task2 = data.min2 || false;
        task3 = data.min3 || false;
      } else if (mode === 'recovery') {
        task1 = data.rec1 || false;
        task2 = data.rec2 || false;
        task3 = data.rec3 || false;
      }

      return task1 && task2 && task3;
    }

    // Update task status emoji
    function updateTaskStatusEmojis() {
      if (!selectedDateKey) return;

      const buildStatus = document.getElementById('buildTasksStatus');
      const minStatus = document.getElementById('minTasksStatus');
      const recStatus = document.getElementById('recTasksStatus');

      const allCompleted = checkAllTasksCompleted(selectedDateKey);
      const emoji = allCompleted ? 'üî•' : 'üò¢';

      if (buildStatus) buildStatus.textContent = emoji;
      if (minStatus) minStatus.textContent = emoji;
      if (recStatus) recStatus.textContent = emoji;
    }

    // Update welcome banner
    function updateWelcomeBanner() {
      const today = new Date();
      const todayKey = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
      
      const hours = today.getHours();
      let greeting = 'Rise and Shine';
      if (hours >= 12 && hours < 17) greeting = 'Good Afternoon';
      else if (hours >= 17) greeting = 'Good Evening';
      
      document.getElementById('welcomeMessage').textContent = `${greeting}, Mr. Aryan! ‚òÄÔ∏è`;
      
      const reminders = JSON.parse(localStorage.getItem(`reminders_${todayKey}`)) || [];
      const taskPreviewList = document.getElementById('taskPreviewList');
      
      const activeReminders = reminders.filter(r => !r.completed);
      const rolledOverCount = activeReminders.filter(r => r.rolledOver).length;
      
      if (activeReminders.length === 0) {
        if (reminders.length > 0) {
          taskPreviewList.innerHTML = '<div class="no-tasks">All tasks completed! üéâ</div>';
        } else {
          taskPreviewList.innerHTML = '<div class="no-tasks">No reminders for today. Enjoy your day!</div>';
        }
      } else {
        let tasksHtml = activeReminders
          .slice(0, 3)
          .map(r => {
            const isRolledOver = r.rolledOver && r.originalDate;
            const icon = isRolledOver ? '‚Üª' : 'üìå';
            return `<div class="task-preview" style="${isRolledOver ? 'background: rgba(251, 191, 36, 0.2); border-left: 3px solid #f59e0b;' : ''}">${icon} ${r.text}</div>`;
          })
          .join('');
        
        if (rolledOverCount > 0) {
          tasksHtml += `<div style="margin-top: 12px; padding: 8px 12px; background: rgba(251, 191, 36, 0.15); border-radius: 8px; font-size: 12px; color: #92400e; font-weight: 600; text-align: center;">
            ‚Üª ${rolledOverCount} task${rolledOverCount > 1 ? 's' : ''} carried over from previous days
          </div>`;
        }
        
        taskPreviewList.innerHTML = tasksHtml;
      }
    }

    // Initialize year selector
    function initYearSelector() {
      const select = document.getElementById('yearSelect');
      for (let y = 2024; y <= 2030; y++) {
        const option = document.createElement('option');
        option.value = y;
        option.textContent = y;
        if (y === currentYear) option.selected = true;
        select.appendChild(option);
      }
      select.addEventListener('change', (e) => {
        currentYear = parseInt(e.target.value);
        renderCalendar();
      });
    }

    // Render calendar
    function renderCalendar() {
      const grid = document.getElementById('daysGrid');
      const monthYearEl = document.getElementById('monthYear');
      
      monthYearEl.textContent = `${monthNames[currentMonth]} ${currentYear}`;
      grid.innerHTML = '';

      const firstDay = new Date(currentYear, currentMonth, 1).getDay();
      const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
      
      const today = new Date();
      const isCurrentMonth = today.getFullYear() === currentYear && today.getMonth() === currentMonth;
      const todayDate = today.getDate();

      const allReminders = getAllReminders();

      for (let i = 0; i < firstDay; i++) {
        const empty = document.createElement('div');
        empty.className = 'day empty';
        grid.appendChild(empty);
      }

      for (let d = 1; d <= daysInMonth; d++) {
        const dayEl = document.createElement('div');
        dayEl.className = 'day';

        const dateKey = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
        
        // Check if this date is in the past
        const checkDate = new Date(currentYear, currentMonth, d);
        const isPastDate = checkDate < today && !(isCurrentMonth && d === todayDate);
        
        const storedData = localStorage.getItem(dateKey);
        
        // Always show just the day number
        dayEl.textContent = d.toString();
        
        if (storedData && isPastDate) {
          // Add classes for styling instead of changing text
          if (checkAllTasksCompleted(dateKey)) {
            dayEl.classList.add('all-tasks-done');
          } else {
            dayEl.classList.add('tasks-incomplete');
          }
        }

        if (storedData) {
          dayEl.classList.add('has-data');
        }

        if (allReminders[dateKey] && allReminders[dateKey].length > 0) {
          dayEl.classList.add('has-reminder');
        }

        if (isCurrentMonth && d === todayDate) {
          dayEl.classList.add('today');
        }

        dayEl.addEventListener('click', () => selectDate(dateKey, dayEl));
        
        grid.appendChild(dayEl);
      }
    }

    // Select a date
    function selectDate(dateKey, dayEl) {
      selectedDateKey = dateKey;
      
      document.querySelectorAll('.day').forEach(d => d.classList.remove('selected'));
      dayEl.classList.add('selected');

      const date = new Date(dateKey);
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      document.getElementById('selectedDate').textContent = date.toLocaleDateString('en-US', options);

      loadDayData(dateKey);
      renderReminders();
      updateTaskStatusEmojis();
    }

    // Load day data
    function loadDayData(dateKey) {
      const data = localStorage.getItem(dateKey);
      if (data) {
        try {
          const parsed = JSON.parse(data);
          
          if (parsed.mode) {
            document.getElementById(`mode${parsed.mode.charAt(0).toUpperCase() + parsed.mode.slice(1)}`).checked = true;
            updateModeDisplay(parsed.mode);
          }
          
          ['build1', 'build2', 'build3', 'min1', 'min2', 'min3', 'rec1', 'rec2', 'rec3'].forEach(id => {
            const el = document.getElementById(id);
            if (el) el.checked = parsed[id] || false;
          });
          
          document.getElementById('nextAction').value = parsed.nextAction || '';
          document.getElementById('completed').value = parsed.completed || '';
          document.getElementById('learned').value = parsed.learned || '';
          document.getElementById('ignore').value = parsed.ignore || '';
        } catch (e) {
          console.error('Error loading day data:', e);
        }
      } else {
        resetForm();
      }
    }

    // Reset form
    function resetForm() {
      document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
      document.querySelectorAll('input[type="checkbox"]').forEach(c => c.checked = false);
      document.querySelectorAll('input[type="text"]').forEach(t => t.value = '');
      updateModeDisplay(null);
    }

    // Save day data
    function saveDayData() {
      if (!selectedDateKey) return;

      const data = {
        mode: document.querySelector('input[name="mode"]:checked')?.value || null,
        build1: document.getElementById('build1')?.checked || false,
        build2: document.getElementById('build2')?.checked || false,
        build3: document.getElementById('build3')?.checked || false,
        min1: document.getElementById('min1')?.checked || false,
        min2: document.getElementById('min2')?.checked || false,
        min3: document.getElementById('min3')?.checked || false,
        rec1: document.getElementById('rec1')?.checked || false,
        rec2: document.getElementById('rec2')?.checked || false,
        rec3: document.getElementById('rec3')?.checked || false,
        nextAction: document.getElementById('nextAction').value,
        completed: document.getElementById('completed').value,
        learned: document.getElementById('learned').value,
        ignore: document.getElementById('ignore').value
      };

      localStorage.setItem(selectedDateKey, JSON.stringify(data));
      renderCalendar();
      updateTaskStatusEmojis();
    }

    // Update mode display
    function updateModeDisplay(mode) {
      document.getElementById('buildActions').style.display = mode === 'build' ? 'block' : 'none';
      document.getElementById('minimumActions').style.display = mode === 'minimum' ? 'block' : 'none';
      document.getElementById('recoveryActions').style.display = mode === 'recovery' ? 'block' : 'none';
    }

    // Render reminders
    function renderReminders() {
      if (!selectedDateKey) return;

      const reminders = JSON.parse(localStorage.getItem(`reminders_${selectedDateKey}`)) || [];
      const list = document.getElementById('remindersList');
      const rolloverNotification = document.getElementById('rolloverNotification');
      const rolloverCount = document.getElementById('rolloverCount');

      // Check for rolled-over reminders
      const rolledOverReminders = reminders.filter(r => r.rolledOver && r.originalDate);
      
      if (rolledOverReminders.length > 0) {
        rolloverCount.textContent = rolledOverReminders.length;
        rolloverNotification.style.display = 'block';
      } else {
        rolloverNotification.style.display = 'none';
      }

      if (reminders.length === 0) {
        list.innerHTML = '<div class="no-reminders">No reminders for this day yet</div>';
        return;
      }

      list.innerHTML = reminders.map((reminder, index) => {
        const isRolledOver = reminder.rolledOver && reminder.originalDate;
        const completedClass = reminder.completed ? 'completed' : '';
        const rolledOverClass = isRolledOver ? 'rolled-over' : '';
        const combinedClass = `reminder-item ${completedClass} ${rolledOverClass}`.trim();
        
        return `
          <div class="${combinedClass}" style="position: relative;">
            <span class="reminder-text">${reminder.text}</span>
            <div class="reminder-actions">
              <input type="checkbox" class="reminder-checkbox" ${reminder.completed ? 'checked' : ''} 
                     onchange="toggleReminder(${index})">
              <button class="delete-reminder-btn" onclick="deleteReminder(${index})">Delete</button>
            </div>
          </div>
        `;
      }).join('');
    }

    // Add reminder
    function addReminder() {
      if (!selectedDateKey) {
        alert('Please select a date first');
        return;
      }

      const input = document.getElementById('reminderInput');
      const text = input.value.trim();

      if (!text) return;

      const reminders = JSON.parse(localStorage.getItem(`reminders_${selectedDateKey}`)) || [];
      reminders.push({ text, completed: false });
      localStorage.setItem(`reminders_${selectedDateKey}`, JSON.stringify(reminders));

      input.value = '';
      renderReminders();
      renderCalendar();
      updateWelcomeBanner();
    }

    // Toggle reminder
    window.toggleReminder = function(index) {
      if (!selectedDateKey) return;

      const reminders = JSON.parse(localStorage.getItem(`reminders_${selectedDateKey}`)) || [];
      if (reminders[index]) {
        reminders[index].completed = !reminders[index].completed;
        localStorage.setItem(`reminders_${selectedDateKey}`, JSON.stringify(reminders));
        renderReminders();
        updateWelcomeBanner();
      }
    }

    // Delete reminder
    window.deleteReminder = function(index) {
      if (!selectedDateKey) return;

      const reminders = JSON.parse(localStorage.getItem(`reminders_${selectedDateKey}`)) || [];
      reminders.splice(index, 1);
      
      if (reminders.length === 0) {
        localStorage.removeItem(`reminders_${selectedDateKey}`);
      } else {
        localStorage.setItem(`reminders_${selectedDateKey}`, JSON.stringify(reminders));
      }
      
      renderReminders();
      renderCalendar();
      updateWelcomeBanner();
    }

    // Event listeners
    document.getElementById('prevMonth').addEventListener('click', () => {
      currentMonth--;
      if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      renderCalendar();
    });

    document.getElementById('nextMonth').addEventListener('click', () => {
      currentMonth++;
      if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      }
      renderCalendar();
    });

    document.querySelectorAll('input[name="mode"]').forEach(radio => {
      radio.addEventListener('change', (e) => {
        updateModeDisplay(e.target.value);
        saveDayData();
      });
    });

    document.querySelectorAll('input[type="checkbox"], input[type="text"]').forEach(el => {
      el.addEventListener('change', saveDayData);
      el.addEventListener('input', saveDayData);
    });

    document.getElementById('addReminderBtn').addEventListener('click', addReminder);
    document.getElementById('reminderInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') addReminder();
    });

    // Initialize
    const today = new Date();
    currentYear = today.getFullYear();
    currentMonth = today.getMonth();

    initYearSelector();
    rolloverIncompleteReminders();
    renderCalendar();
    updateWelcomeBanner();

    // Auto-select today
    const todayKey = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
    const todayEl = Array.from(document.querySelectorAll('.day')).find(el => 
      el.textContent.trim() == today.getDate().toString() && el.classList.contains('today')
    );
    if (todayEl) {
      setTimeout(() => todayEl.click(), 150);
    }
  </script>
</body>
</html>